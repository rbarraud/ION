###WARNING

Test refactor in progress. 
Will build and pass (on ion32sim) but needs comments and reformatting, and many optional tests are disabled.

This is only the first step for the RTL refactor.
